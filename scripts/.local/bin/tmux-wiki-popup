#!/usr/bin/env bash

# WIKI_DIR=${WIKI_DIR:~/wiki}
# WIKI_DIR=~/wiki
if [ -z "$WIKI_DIR" ]; then
	WIKI_DIR="/home/kade/Documents/Vault"
fi

declare selected
# TODO: Take multiple args
if [[ $# -eq 1 ]]; then
	selected="$1"
else
	selected=$(fd . $WIKI_DIR -t f --full-path |
		sed "s|^$WIKI_DIR/||" |
		fzf --height 100% --color bw)
fi

[[ $selected ]] && selected="$WIKI_DIR/$selected"

[[ ! $selected ]] && exit 0

nvim $selected --cmd "cd $WIKI_DIR"
