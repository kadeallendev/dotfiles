#!/usr/bin/env bash

# Get wiki directory
if [ -z "$WIKI_DIR" ]; then
	HOSTNAME=$(hostname)
	case "$HOSTNAME" in
	"PTML-WS-060")
		WIKI_DIR="/home/kade/Documents/wiki"
		;;
	"hedgy")
		WIKI_DIR="/Users/kade/wiki"
		;;
	*)
		WIKI_DIR="~/wiki"
		;;
	esac
fi

declare selected
# TODO: Take multiple args
if [[ $# -eq 1 ]]; then
	selected="$1"
else
	selected=$(fd . $WIKI_DIR -t f --full-path |
		sed "s|^$WIKI_DIR/||" |
		fzf --height 100% --color bw)
fi

[[ $selected ]] && selected="$WIKI_DIR/$selected"

[[ ! $selected ]] && exit 0

nvim $selected --cmd "cd $WIKI_DIR"
